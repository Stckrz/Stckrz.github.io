Listview.templates.screenshot={copyableColumns:false,sort:[],mode:Listview.MODE_TILED,nItemsPerPage:40,searchable:true,filtrable:true,hash:Listview.HASH_SIMPLE,columns:[],sortOptions:[{id:"date",name:WH.TERMS.date,value:"date",type:Listview.COLUMN_TYPE_TEXT,filtrable:false},{id:"user",name:WH.TERMS.user,value:"user",type:Listview.COLUMN_TYPE_TEXT},{id:"width",name:WH.TERMS.width,value:"width"},{id:"height",name:WH.TERMS.height,value:"height"}],compute:function(e,t,a){var i;t.className="screenshot-cell screenshot-cell-clickable";t.vAlign="bottom";var s=WH.ce("a");s.href=WH.getScreenshotUrl(e.id,"normal",{description:ScreenshotViewer.getScreenshotDescription(e),imageType:e.imageType,staffOnly:e.staffOnly});s.onclick=function(e,t,i){i.stopPropagation();if(WH.isLeftClick(i)){ScreenshotViewer.show({screenshots:this.data,pos:a});i.preventDefault();return false}}.bind(this,this.id,e.id);var n=WH.ce("img"),r=Math.min(150/e.width,150/e.height);n.src=WH.getScreenshotUrl(e.id,"small",{imageType:e.imageType,staffOnly:e.staffOnly});WH.ae(s,n);WH.ae(t,s);var c=WH.ce("div");c.className="screenshot-cell-user";var o=e.user!=null&&e.user.length;if(o){s=WH.ce("a");s.href=WH.Url.generatePath("/user="+e.user);WH.ae(s,WH.ct(e.user));WH.ae(c,WH.ct(WH.TERMS.from));WH.ae(c,s);WH.ae(c,WH.ct(" "))}if(e.date){var l=new Date(e.date);var h=WH.ce("span");if(o){WH.formatDate(h,(WH.getServerTime()-l)/1e3,l)}else{WH.formatDate(h,(WH.getServerTime()-l)/1e3,l,0,1)}WH.ae(c,h);WH.ae(c,WH.ct(" "+WH.TERMS.dash_punct+" "));var s=WH.ce("a");s.href="javascript:";s.className="fa fa-exclamation-triangle fa-size-s";if(typeof this.deletefunction!="function"||!this.deletefunction){s.onclick=ContactTool.show.bind(ContactTool,{mode:3,screenshot:e});WH.Tooltip.simple(s,WH.TERMS.reportingoptions_tip,"q2");WH.ae(s,WH.ct(WH.TERMS.report))}else{WH.aE(s,"click",function(e,t){return function(){e(t)}}(this.deletefunction,e));WH.ae(s,WH.ct("Delete"))}WH.ae(c,s)}WH.ae(t,c);c=WH.ce("div");c.className="screenshot-caption-wrapper";if(Locale.getId()!=LOCALE_ENUS&&e.caption){e.caption=""}var f=e.caption!=null&&e.caption.length;var H=e.subject!=null&&e.subject.length;if(f||H){var W=WH.ce("div");W.className="screenshot-caption";if(H){var p=WH.ce("small");var u=WH.Types.getUpperSingular(e.type);WH.ae(p,WH.ct(u+WH.TERMS.colon_punct));var d=WH.ce("a");if(e.hasOwnProperty("subjectQuality")){d.className="q"+e.subjectQuality}if(e.hasOwnProperty("subjectRel")){d.rel=e.subjectRel}WH.ae(d,WH.ct(e.subject));d.href=WH.Entity.getUrl(e.type,e.typeId,e.subject,undefined,e.dataEnv,e.locale);WH.ae(p,d);WH.ae(W,p);if(f&&e.caption.length){WH.ae(p,WH.ct(" (...)"))}WH.ae(p,WH.ce("br"))}if(f){var g=WH.ce("span");g.appendChild(WH.markup.getDomFragment(e.caption,{mode:WH.markup.MODE.SIGNATURE}));WH.ae(W,g)}WH.ae(c,W)}WH.aE(t,"click",Listview.templates.screenshot.cellClick.bind(this,a));WH.ae(t,c)},cellClick:function(e,t){if(t.shiftKey||t.ctrlKey){return}let a=t.target;while(a){if(a.nodeName=="A"){return}if(a.nodeName=="IMG"){break}a=a.parentNode}ScreenshotViewer.show({screenshots:this.data,pos:e,hashname:this.id})},createNote:function(e){if(typeof g_pageInfo=="object"&&g_pageInfo.type>0&&g_pageInfo.type!=150){var t=WH.ce("small");var a=WH.ce("a");if(g_user.id>0){a.href="javascript:";a.onclick=ss_submitAScreenshot}else{a.href=WH.Url.getLoginPath()}WH.ae(a,WH.ct(WH.TERMS.submitascreenshot_stc));WH.ae(t,a);WH.ae(e,t)}},onNoData:function(e){if(typeof g_pageInfo=="object"&&g_pageInfo.type>0){var t="<b>"+WH.TERMS.noscreenshots_tip+'</b><div class="pad2"></div>';if(g_user.id>0){var a=WH.TERMS.firstscreenshot_tip;a=a.replace("<a>",'<a href="javascript:" onclick="ss_submitAScreenshot()" onmousedown="return false">');t+=a}else{t+=WH.term("screenshotlogin_tip",'<a href="'+WH.Url.getLoginPath(location.pathname+location.search+location.hash)+'">',"</a>",'<a href="'+WH.Url.getRegistrationPath()+'">',"</a>")}e.style.padding="1.5em 0";e.innerHTML=t}else{return-1}},onBeforeCreate:function(){if(location.hash&&location.hash.match(/:id=([0-9]+)/)!=null){var e=WH.inArray(this.data,parseInt(RegExp.$1),(function(e){return e.id}));this.rowOffset=this.getRowOffset(e);return e}},onAfterCreate:function(e){if(e!=null){setTimeout(function(){ScreenshotViewer.show({screenshots:this.data,pos:e})}.bind(this),1)}}};