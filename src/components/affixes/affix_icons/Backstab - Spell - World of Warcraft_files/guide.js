Listview.templates.guide={entityType:WH.Types.GUIDE,sort:["rating"],searchable:1,filtrable:1,columns:[{id:"title",name:"Title",type:"text",align:"left",value:"title",compute:function(t,e,a){if(t.status==5){$(a).addClass("outofdate")}let n=t.name||t.title||t.url;let s=WH.ce("a",{className:"listview-cleartext",href:t.url},WH.ct(n));if(this.onItemClick){WH.aE(s,"click",this.onItemClick.bind(this,t))}if(t.sticky){s.classList.add("fa","fa-thumb-tack")}if(!t.image){$(e).addClass("guides-list-cell-nameonly").append(s)}else{if(t["class"]){s.classList.add("c"+t["class"])}else if(t.spec){s.classList.add("c"+WH.Wow.PlayerClass.getBySpec(t.spec))}let a=WH.ce("table",{className:"guides-list-name"+(n.length>=60?" long-name":"")},WH.ce("tr",undefined,WH.ce("td",undefined,s)));let r=t.image+(t.image.indexOf("?")>-1?"&":"?")+"maxHeight=100";$(e).addClass("guides-list-cell").append($("<div/>").append($("<div/>",{class:"guides-list-bg",style:"background-image:url("+r+")",html:"<div></div>"})).append(a))}},getVisibleText:function(t){return t.name||t.title||t.url}},{id:"status",name:"Status",type:"text",hidden:1,compute:function(t,e){var a=$("<span>").text(WH.Guide.getStatusName(t.status)).addClass(function(){switch(t.status){case 1:return"c8";case 2:return"c4";case 3:return"q2";case 4:return"q10";case 5:return"q5";default:return""}}());$(e).append(a)},getVisibleText:function(t){return WH.Guide.getStatusName(t.status)},sortFunc:function(t,e){if(t.status==e.status){return 0}return t.status<e.status?-1:1}},{id:"category",name:"Category",type:"text",compute:function(t,e){if(!t.categoryNames||!t.categoryNames.length){return}e.style.whiteSpace="nowrap";let a=WH.ce("a",{href:WH.Url.generatePath("/guides/"+t.categoryPath),className:"q1",dataset:{wowhead:"np"}});WH.ae(e,a);WH.ae(a,WH.ct(t.categoryNames[t.categoryNames.length-1]));for(let e=t.categoryNames.length-2;e>=0;e--){WH.aef(a,WH.ce("br"));WH.aef(a,WH.ce("span",{className:"small"},WH.ct(t.categoryNames[e])))}},getVisibleText:function(t){return t.categoryNames.join(WH.TERMS.hyphen_punct)},sortFunc:function(t,e){if(t.category==e.category){return 0}return t.category<e.category?-1:1}},{id:"author",name:"Author",type:"text",compute:function(t,e){var a=$("<a>").attr("href","/user="+t.author).text(t.author);var n=WH.User.getCommentRoleClass(t.authorroles);if(n){a.addClass(n)}else{a.addClass("q1")}$(e).append(a)},getVisibleText:function(t){return t.author},sortFunc:function(t,e){return WH.stringCompare(t.author,e.author)}},{id:"rating",name:"Rating",type:"range",width:"200px",compute:function(t,e){$(e).append(GetStars(t.rating));var a=$("<span>").css("font-size","85%");if(t.rating<0){a.text((5-t.nvotes===1?WH.TERMS.needsvote_format:WH.TERMS.needsvotes_format).replace("%s",5-t.nvotes))}else{a.text((t.nvotes===1?WH.TERMS.outofvote_format:WH.TERMS.outofvotes_format).replace("%s",WH.getN5(t.nvotes)))}$(e).append(a)},getMinValue:function(t){return guide.rating},getMaxValue:function(t){return guide.rating},sortFunc:function(t,e){if(t.sticky&&!e.sticky){return-1}else if(!t.sticky&&e.sticky){return 1}var a=t.rating==-1&&t.author!="Wowhead";var n=e.rating==-1&&e.author!="Wowhead";if(a&&!n){return-1}else if(n&&!a){return 1}if(t.rating==e.rating){return 0}return t.rating<e.rating?1:-1}},{id:"comments",name:"Comments",type:"text",value:"comments",width:"120px",compute:function(t){return WH.getN5(t.comments)}},{id:"patch",name:"Expansion",type:"text",width:"120px",compute:function(t,e){let a=WH.ce("span");a.className=WH.Wow.Expansion.getRightIconClass(Math.floor(t.patch/1e4)-1);if(a.className.substr(0,12)==="icon-unknown"){a.innerHTML=WH.Wow.getVersionStrFromNum(t.patch)}else{a.title=WH.Wow.getVersionStrFromNum(t.patch)}WH.ae(e,a)},sortFunc:function(t,e){if(t.patch==e.patch){return 0}return t.patch<e.patch?-1:1}},{id:"lastEdit",name:WH.TERMS.updated,type:"text",hidden:1,compute:function(t,e){let a=new Date(t.lastEdit);let n=(WH.getServerTime()-a)/1e3;let s=WH.ce("span");WH.formatDate(s,n,a,null,1);WH.ae(e,s)},sortFunc:function(t,e){return new Date(t.lastEdit)-new Date(e.lastEdit)}}],getItemLink:function(t){return t.url}};