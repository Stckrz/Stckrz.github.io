Listview.templates["forums-topic"]={sort:["-lastpost"],nItemsPerPage:-1,hideBands:1|2,hash:Listview.HASH_SIMPLE,sortable:false,columns:[{id:"subject",name:WH.TERMS.subject,align:"left",value:"subject",compute:function(e,t){var a=WH.ce("div");var s=WH.ce("a"),l,r;s.className="forums-topicsubject listview-cleartext";if(e.newsUrls&&e.newsUrls.newsPost){s.href=e.newsUrls.newsPost}else{let t=e.lastpost[1]===1?e.lastpost[2]:null;s.href=this.template.buildItemLink(e.id,null,t,e.subject)}l=WH.ce("span");WH.ae(l,WH.ct(e.subject));if(e.global){l.className="fa fa-bell";r=WH.ce("span");WH.ae(r,l);l=r}if(e.locked){l.className="fa fa-lock";r=WH.ce("span");WH.ae(r,l);l=r}if(e.sticky){l.className="fa fa-thumb-tack";r=WH.ce("span");WH.ae(r,l);l=r}if(e.blog==1||e.blog==4){l.className="fa fa-book";r=WH.ce("span");WH.ae(r,l);l=r}if(e.poll==1){l.className="fa fa-bar-chart-o";r=WH.ce("span");WH.ae(r,l);l=r}WH.ae(s,l);WH.ae(t,s);var i=Math.ceil((e.replies+1)/20);if(i>1&&!e.newsUrls){var o=WH.ce("div");o.className="forums-topicpages";WH.ae(o,WH.ct(WH.TERMS.pages_colon));var n=Math.max(1,i/4);for(var c=1;c<=5;++c){var H;if(c===5){H=i}else{H=Math.floor(1+(c-1)*n)}if(H>i){break}s=WH.ce("a");s.href=this.template.buildItemLink(e.id,H,e.lastpost[1]===H?e.lastpost[2]:null,e.subject);WH.ae(s,WH.ct("["+H+"]"));WH.ae(o,s);if(H===i){break}}WH.ae(t,o)}}},{id:"posted",name:WH.TERMS.posted,width:"16%",value:"posted",hidden:true,compute:function(e,t){var a=new Date(e.posted),s=(WH.getServerTime()-a)/1e3;var l=WH.ce("span");WH.formatDate(l,s,a,null,1);WH.ae(t,l)}},{id:"author",name:WH.TERMS.author,value:"author",compute:function(e,t){var a=WH.ce("a");t.className="small";a.href=WH.Url.generatePath("/user="+e.author);WH.ae(a,WH.ct(e.author));var s;if(e.roles){e.user=e.author;s=WH.Comments.getColorClass(e,WH.Comments.EDIT_MODE_USER_SIGNATURE)}a.className=s?s:"q1";WH.ae(t,a)}},{id:"replies",name:WH.TERMS.replies,value:"replies"},{id:"lastpost",name:WH.TERMS.lastpost_stc,align:"left",value:"lastpost",compute:function(e,t){var a=new Date(e.lastpost[0]),s=(WH.getServerTime()-a)/1e3;t.className="small";t.style.whiteSpace="nowrap";WH.ae(t,WH.ct(WH.TERMS.by));var l=WH.ce("a");l.href=WH.Url.generatePath("/user="+e.lastpost[3]);l.style.fontWeight="bold";if(e.lastpost[4]){var r;e.user=e.lastpost[3];var i=e.roles;e.roles=e.lastpost[4];r=WH.Comments.getColorClass(e,WH.Comments.EDIT_MODE_USER_SIGNATURE);e.roles=i;if(r){l.className=r}}WH.ae(l,WH.ct(e.lastpost[3]));WH.ae(t,l);WH.ae(t,WH.ct(" "));l=WH.ce("a");WH.formatDate(l,s,a);l.style.cursor="pointer";l.className+=" q1";l.href=this.template.buildItemLink(e.id,e.lastpost[1],e.lastpost[2],e.subject);if(e.newsUrls&&e.newsUrls.lastComment){l.href=e.newsUrls.lastComment}l.innerHTML+=' <i class="fa fa-arrow-right"></i>';WH.ae(t,l)},sortFunc:function(e,t){var a=WH.stringCompare(e.sticky,t.sticky);if(a!=0){return a}if(e.sticky){return-WH.stringCompare(e.id,t.id)}else{return WH.stringCompare(e.lastpost[2],t.lastpost[2])}}}],buildItemLink:function(e,t,a,s){let l=WH.Url.generatePath("/forums/topic/");let r;if(s.length>0){r=WH.Strings.slug(s);if(r.length>0){l+=r+"-"}}l+=e;if(t>1){l+="?page="+t}if(a){l+="#p"+a}return l},getItemLink:function(e){return this.template.buildItemLink(e.id,null,null,e.subject)}};